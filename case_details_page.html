<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Case Details - Dental Practice</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #BCDDE4;
      min-height: 100vh;
      padding: 20px;
    }

    .app-container {
      background: #EDEDED;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      max-width: 1000px;
      margin: 0 auto;
      animation: slideUp 0.6s ease-out;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .header {
      background: linear-gradient(135deg, #197CAE 0%, #003049 100%);
      padding: 30px;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-info h1 {
      font-size: 28px;
      margin-bottom: 5px;
    }

    .header-info p {
      opacity: 0.9;
      font-size: 14px;
    }

    .case-status {
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 500;
      margin-left: 15px;
      display: inline-block;
    }

    .status-new { background: #e3f2fd; color: #1976d2; }
    .status-in-progress { background: #fff3e0; color: #f57c00; }
    .status-completed { background: #e8f5e8; color: #388e3c; }
    .status-urgent { background: #ffebee; color: #d32f2f; }

    .header-actions {
      display: flex;
      gap: 15px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .btn-primary {
      background: #FFCB05;
      color: #003049;
    }

    .btn-primary:hover {
      background: #e6b405;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .content {
      padding: 40px 30px;
    }

    .case-overview {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 30px;
      margin-bottom: 40px;
    }

    .main-info {
      background: white;
      border-radius: 15px;
      padding: 30px;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .main-info:hover {
      border-color: #197CAE;
      box-shadow: 0 10px 25px rgba(0, 48, 73, 0.1);
    }

    .case-title {
      font-size: 24px;
      color: #003049;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #BCDDE4;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }

    .info-item {
      display: flex;
      flex-direction: column;
    }

    .info-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 5px;
      text-transform: uppercase;
      font-weight: 500;
    }

    .info-value {
      font-size: 16px;
      color: #003049;
      font-weight: 600;
    }

    .priority-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 500;
    }

    .priority-low { background: #e8f5e8; color: #388e3c; }
    .priority-normal { background: #e3f2fd; color: #1976d2; }
    .priority-high { background: #fff3e0; color: #f57c00; }
    .priority-urgent { background: #ffebee; color: #d32f2f; }

    .side-panel {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .panel-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .panel-card:hover {
      border-color: #197CAE;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 48, 73, 0.1);
    }

    .panel-card h3 {
      color: #003049;
      margin-bottom: 15px;
      font-size: 18px;
    }

    .notes-section {
      background: white;
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .notes-section:hover {
      border-color: #197CAE;
      box-shadow: 0 10px 25px rgba(0, 48, 73, 0.1);
    }

    .notes-content {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid #197CAE;
      font-style: italic;
      color: #003049;
      line-height: 1.6;
    }

    .technical-specs {
      background: white;
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .technical-specs:hover {
      border-color: #197CAE;
      box-shadow: 0 10px 25px rgba(0, 48, 73, 0.1);
    }

    .specs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
    }

    .spec-item {
      text-align: center;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .spec-item:hover {
      background: #BCDDE4;
      transform: translateY(-2px);
    }

    .spec-icon {
      font-size: 30px;
      margin-bottom: 10px;
      display: block;
    }

    .spec-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 5px;
    }

    .spec-value {
      font-size: 16px;
      color: #003049;
      font-weight: 600;
    }

    .action-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 30px;
    }

    .action-btn {
      background: linear-gradient(135deg, #197CAE 0%, #003049 100%);
      color: white;
      border: none;
      padding: 15px 20px;
      border-radius: 15px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(25, 124, 174, 0.3);
    }

    .payment-status {
      padding: 6px 15px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 500;
    }

    .payment-pending { background: #fff3e0; color: #f57c00; }
    .payment-paid { background: #e8f5e8; color: #388e3c; }
    .payment-overdue { background: #ffebee; color: #d32f2f; }
    .payment-partial { background: #e3f2fd; color: #1976d2; }
    .payment-insurance { background: #f3e5f5; color: #7b1fa2; }
    .payment-cancelled { background: #eeeeee; color: #616161; }

    .delivery-info {
      background: #f0f8ff;
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid #197CAE;
      margin-top: 20px;
    }

    .delivery-info h4 {
      color: #003049;
      margin-bottom: 10px;
    }

    .delivery-address {
      color: #003049;
      line-height: 1.5;
    }

    /* Activity Log Styles */
    .activity-log-container {
      background: #f0f8ff;
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid #197CAE;
      margin-top: 20px;
    }

    .activity-log {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 15px;
    }

    .activity-entry {
      display: flex;
      gap: 12px;
      padding: 12px;
      background: white;
      border-radius: 8px;
      margin-bottom: 8px;
      border-left: 3px solid #197CAE;
      transition: all 0.3s ease;
    }

    .activity-entry:hover {
      transform: translateX(3px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .activity-entry:last-child {
      margin-bottom: 0;
    }

    .activity-icon {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      flex-shrink: 0;
    }

    .activity-icon.status-change {
      background: #e3f2fd;
      color: #1976d2;
    }

    .activity-icon.note-added {
      background: #f3e5f5;
      color: #7b1fa2;
    }

    .activity-icon.file-upload {
      background: #e8f5e8;
      color: #388e3c;
    }

    .activity-icon.assignment {
      background: #fff3e0;
      color: #f57c00;
    }

    .activity-icon.message-sent {
      background: #e0f7fa;
      color: #00796b;
    }

    .activity-icon.case-created {
      background: #fce4ec;
      color: #c2185b;
    }

    .activity-content {
      flex: 1;
    }

    .activity-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .activity-user {
      font-weight: 600;
      color: #003049;
      font-size: 13px;
    }

    .activity-time {
      color: #666;
      font-size: 11px;
    }

    .activity-action {
      font-weight: 500;
      color: #197CAE;
      margin-bottom: 2px;
      font-size: 13px;
    }

    .activity-details {
      color: #666;
      font-size: 12px;
      line-height: 1.3;
    }

    .activity-log-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      border-top: 1px solid #ddd;
      padding-top: 15px;
      flex-wrap: wrap;
    }

    .activity-action-btn {
      background: linear-gradient(135deg, #197CAE 0%, #003049 100%);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 15px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .activity-action-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(25, 124, 174, 0.3);
    }

    .activity-log::-webkit-scrollbar {
      width: 6px;
    }

    .activity-log::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 3px;
    }

    .activity-log::-webkit-scrollbar-thumb {
      background: #197CAE;
      border-radius: 3px;
    }

    .activity-log::-webkit-scrollbar-thumb:hover {
      background: #003049;
    }

    @media (max-width: 768px) {
      .case-overview {
        grid-template-columns: 1fr;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }

      .specs-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      }

      .action-buttons {
        grid-template-columns: 1fr;
      }

      .activity-log {
        max-height: 250px;
      }

      .activity-entry {
        padding: 10px;
        flex-direction: column;
        gap: 8px;
      }

      .activity-icon {
        width: 25px;
        height: 25px;
        font-size: 12px;
        align-self: flex-start;
      }

      .activity-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 2px;
      }

      .activity-log-actions {
        flex-direction: column;
        gap: 8px;
      }

      .activity-action-btn {
        width: 100%;
        justify-content: center;
        padding: 10px 16px;
        font-size: 13px;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="header">
      <div class="header-info">
        <h1>Case #0001</h1>
        <p>Crown Restoration - Maria Rodriguez</p>
        <span class="case-status status-in-progress">IN PROGRESS</span>
      </div>
      <div class="header-actions">
        <button class="btn btn-primary" onclick="editCase()">Edit Case</button>
        <a href="#" class="btn btn-secondary" onclick="goBack()">← Back to Cases</a>
      </div>
    </div>

    <div class="content">
      <!-- Case Overview -->
      <div class="case-overview">
        <div class="main-info">
          <div class="case-title">Case Information</div>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">Patient Name</div>
              <div class="info-value">Maria Rodriguez</div>
            </div>
            <div class="info-item">
              <div class="info-label">Doctor</div>
              <div class="info-value">Dr. Sarah Johnson</div>
            </div>
            <div class="info-item">
              <div class="info-label">Practice</div>
              <div class="info-value">Downtown Dental Clinic</div>
            </div>
            <div class="info-item">
              <div class="info-label">Technician</div>
              <div class="info-value">John Tech</div>
            </div>
            <div class="info-item">
              <div class="info-label">Case Date</div>
              <div class="info-value">August 1, 2025</div>
            </div>
            <div class="info-item">
              <div class="info-label">Deadline</div>
              <div class="info-value">August 3, 2025</div>
            </div>
            <div class="info-item">
              <div class="info-label">Priority</div>
              <div class="info-value">
                <span class="priority-badge priority-urgent">URGENT</span>
              </div>
            </div>
            <div class="info-item">
              <div class="info-label">Price</div>
              <div class="info-value" style="font-size: 20px; color: #197CAE; font-weight: bold;">$450.00</div>
            </div>
            <div class="info-item">
              <div class="info-label">Payment Status</div>
              <div class="info-value">
                <span class="payment-status payment-pending">PENDING</span>
              </div>
            </div>
            <div class="info-item">
              <div class="info-label">Tooth Number</div>
              <div class="info-value">#14</div>
            </div>
          </div>
        </div>

        <div class="side-panel">
          <div class="panel-card">
            <h3>📋 Case Summary</h3>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>Case Type</span>
                <span style="font-weight: bold; color: #197CAE;">Crown Restoration</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>Priority</span>
                <span class="priority-badge priority-urgent">URGENT</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>Status</span>
                <span style="font-weight: bold; color: #f57c00;">In Progress</span>
              </div>
              <div style="display: flex; justify-content: space-between; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px;">
                <span style="font-weight: bold;">Total Price</span>
                <span style="font-weight: bold; color: #197CAE; font-size: 18px;">$450.00</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Technical Specifications -->
      <div class="technical-specs">
        <div class="case-title">Technical Specifications</div>
        <div class="specs-grid">
          <div class="spec-item">
            <span class="spec-icon">🦷</span>
            <div class="spec-label">Item Type</div>
            <div class="spec-value">Crown</div>
          </div>
          <div class="spec-item">
            <span class="spec-icon">💎</span>
            <div class="spec-label">Material</div>
            <div class="spec-value">Zirconia</div>
          </div>
          <div class="spec-item">
            <span class="spec-icon">🎨</span>
            <div class="spec-label">Shade</div>
            <div class="spec-value">A2</div>
          </div>
        </div>
      </div>

      <!-- Activity Log Section -->
      <div class="notes-section">
        <div class="case-title">📊 Recent Activity</div>
        <div class="activity-log-container">

          <!-- Activity Log -->
          <div class="activity-log" id="activityLog">
            <div class="activity-entry">
              <div class="activity-icon case-created">🆕</div>
              <div class="activity-content">
                <div class="activity-header">
                  <span class="activity-user">Dr. Sarah Johnson</span>
                  <span class="activity-time">2 min ago</span>
                </div>
                <div class="activity-action">Case created</div>
                <div class="activity-details">New crown restoration case submitted for Maria Rodriguez, tooth #14</div>
              </div>
            </div>

            <div class="activity-entry">
              <div class="activity-icon assignment">👨‍🔬</div>
              <div class="activity-content">
                <div class="activity-header">
                  <span class="activity-user">Lab Manager</span>
                  <span class="activity-time">5 min ago</span>
                </div>
                <div class="activity-action">Assigned to technician</div>
                <div class="activity-details">Case assigned to John Tech for processing</div>
              </div>
            </div>

            <div class="activity-entry">
              <div class="activity-icon status-change">📝</div>
              <div class="activity-content">
                <div class="activity-header">
                  <span class="activity-user">John Tech</span>
                  <span class="activity-time">10 min ago</span>
                </div>
                <div class="activity-action">Status updated</div>
                <div class="activity-details">Changed status from "New" to "In Progress"</div>
              </div>
            </div>

            <div class="activity-entry">
              <div class="activity-icon note-added">💬</div>
              <div class="activity-content">
                <div class="activity-header">
                  <span class="activity-user">Dr. Sarah Johnson</span>
                  <span class="activity-time">15 min ago</span>
                </div>
                <div class="activity-action">Added special instructions</div>
                <div class="activity-details">Rush order requirements and shade matching notes added</div>
              </div>
            </div>

            <div class="activity-entry">
              <div class="activity-icon file-upload">📎</div>
              <div class="activity-content">
                <div class="activity-header">
                  <span class="activity-user">Dr. Sarah Johnson</span>
                  <span class="activity-time">20 min ago</span>
                </div>
                <div class="activity-action">Uploaded impression scans</div>
                <div class="activity-details">Digital impression files uploaded for fabrication</div>
              </div>
            </div>
          </div>

          <!-- Activity Log Actions -->
          <div class="activity-log-actions">
            <button class="activity-action-btn" onclick="loadMoreActivities()">
              <span>⬇️</span> Load More
            </button>
            <button class="activity-action-btn" onclick="exportActivityLog()">
              <span>📊</span> Export Log
            </button>
            <button class="activity-action-btn" onclick="clearOldActivities()" style="background: transparent; color: #666; border: 1px solid #ddd;">
              <span>🗑️</span> Clear Old
            </button>
          </div>
        </div>
      </div>

      <!-- Notes Section -->
      <div class="notes-section">
        <div class="case-title">Special Instructions & Notes</div>
        <div class="notes-content">
          "Rush order - patient has important event this weekend. Please ensure perfect color match with adjacent teeth. Patient prefers slightly more translucent finish. Contact Dr. Johnson if any questions about occlusion."
        </div>
      </div>

      <!-- Delivery Information -->
      <div class="notes-section">
        <div class="case-title">Delivery Information</div>
        <div class="delivery-info">
          <h4>📍 Delivery Address</h4>
          <div class="delivery-address">
            Downtown Dental Clinic<br>
            123 Main Street, Suite 200<br>
            Downtown, State 12345<br>
            Phone: (555) 123-4567
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button class="action-btn" onclick="updateStatus()">
          <span>📝</span> Update Status
        </button>
        <button class="action-btn" onclick="addNote()">
          <span>💬</span> Add Note
        </button>
        <button class="action-btn" onclick="uploadPhotos()">
          <span>📷</span> Upload Photos
        </button>
        <button class="action-btn" onclick="markComplete()">
          <span>✅</span> Mark Complete
        </button>
        <button class="action-btn" onclick="sendMessage()">
          <span>✉️</span> Message Doctor
        </button>
        <button class="action-btn" onclick="printCase()">
          <span>🖨️</span> Print Details
        </button>
      </div>
    </div>
  </div>

  <script>
    // Current user info
    const currentUser = {
      name: "John Tech",
      avatar: "👨‍🔬",
      role: "Technician"
    };

    function addActivityEntry(action, details, type = 'status-change') {
      const activityLog = document.getElementById('activityLog');
      const now = new Date();
      const timeAgo = "Just now";
      
      // Determine activity type and icon
      let icon = '📝';
      
      if (action.toLowerCase().includes('note') || action.toLowerCase().includes('message')) {
        type = 'note-added';
        icon = '💬';
      } else if (action.toLowerCase().includes('file') || action.toLowerCase().includes('upload')) {
        type = 'file-upload';
        icon = '📎';
      } else if (action.toLowerCase().includes('assign')) {
        type = 'assignment';
        icon = '👨‍🔬';
      } else if (action.toLowerCase().includes('message') || action.toLowerCase().includes('sent')) {
        type = 'message-sent';
        icon = '✉️';
      } else if (action.toLowerCase().includes('creat')) {
        type = 'case-created';
        icon = '🆕';
      } else if (action.toLowerCase().includes('complet')) {
        type = 'status-change';
        icon = '✅';
      }
      
      // Create new activity entry
      const activityEntry = document.createElement('div');
      activityEntry.className = 'activity-entry';
      activityEntry.style.opacity = '0';
      activityEntry.style.transform = 'translateX(-10px)';
      
      activityEntry.innerHTML = `
        <div class="activity-icon ${type}">${icon}</div>
        <div class="activity-content">
          <div class="activity-header">
            <span class="activity-user">${currentUser.name}</span>
            <span class="activity-time">${timeAgo}</span>
          </div>
          <div class="activity-action">${action}</div>
          <div class="activity-details">${details}</div>
        </div>
      `;
      
      // Insert at the top of the activity log
      if (activityLog.firstChild) {
        activityLog.insertBefore(activityEntry, activityLog.firstChild);
      } else {
        activityLog.appendChild(activityEntry);
      }
      
      // Animate in
      setTimeout(() => {
        activityEntry.style.transition = 'all 0.5s ease';
        activityEntry.style.opacity = '1';
        activityEntry.style.transform = 'translateX(0)';
      }, 100);
      
      // Highlight briefly
      setTimeout(() => {
        activityEntry.style.backgroundColor = '#e8f5e8';
        setTimeout(() => {
          activityEntry.style.backgroundColor = 'white';
        }, 2000);
      }, 600);
    }

    function loadMoreActivities() {
      const activityLog = document.getElementById('activityLog');
      
      // Simulate loading more activities
      const moreActivities = [
        {
          icon: '📝',
          type: 'status-change',
          user: 'John Tech',
          time: '1 day ago',
          action: 'Updated case priority',
          details: 'Changed priority from Normal to High due to patient request'
        },
        {
          icon: '📞',
          type: 'message-sent',
          user: 'Dr. Sarah Johnson',
          time: '1 day ago',
          action: 'Phone consultation',
          details: 'Discussed case details and confirmed specifications'
        },
        {
          icon: '🔍',
          type: 'note-added',
          user: 'Lab Manager',
          time: '2 days ago',
          action: 'Quality review',
          details: 'Case reviewed and approved for production'
        }
      ];
      
      moreActivities.forEach((activity, index) => {
        setTimeout(() => {
          const activityEntry = document.createElement('div');
          activityEntry.className = 'activity-entry';
          activityEntry.style.opacity = '0';
          activityEntry.style.transform = 'translateY(20px)';
          
          activityEntry.innerHTML = `
            <div class="activity-icon ${activity.type}">${activity.icon}</div>
            <div class="activity-content">
              <div class="activity-header">
                <span class="activity-user">${activity.user}</span>
                <span class="activity-time">${activity.time}</span>
              </div>
              <div class="activity-action">${activity.action}</div>
              <div class="activity-details">${activity.details}</div>
            </div>
          `;
          
          activityLog.appendChild(activityEntry);
          
          // Animate in
          setTimeout(() => {
            activityEntry.style.transition = 'all 0.5s ease';
            activityEntry.style.opacity = '1';
            activityEntry.style.transform = 'translateY(0)';
          }, 100);
          
        }, index * 200);
      });
      
      showNotification('📥 Loaded 3 more activities', '#197CAE');
    }

    function exportActivityLog() {
      const activityEntries = document.querySelectorAll('#activityLog .activity-entry');
      
      if (!activityEntries || activityEntries.length === 0) {
        showNotification('❌ No activities to export', '#f44336');
        return;
      }
      
      // Simulate export functionality
      showNotification(`📊 Exporting ${activityEntries.length} activities...`, '#197CAE');
      
      setTimeout(() => {
        addActivityEntry(
          'Exported activity log',
          `Generated export file with ${activityEntries.length} activity entries`
        );
        showNotification('✅ Activity log exported successfully!', '#4caf50');
      }, 1500);
    }

    function clearOldActivities() {
      if (confirm('🗑️ Clear Old Activity Entries?\n\nThis will remove activities older than 24 hours. Recent activities will be preserved.\n\nContinue?')) {
        const activityLog = document.getElementById('activityLog');
        const entries = activityLog.querySelectorAll('.activity-entry');
        
        // Keep first 3 entries (most recent), remove the rest
        for (let i = 3; i < entries.length; i++) {
          if (entries[i]) {
            entries[i].style.transition = 'all 0.5s ease';
            entries[i].style.opacity = '0';
            entries[i].style.transform = 'translateX(-20px)';
            
            setTimeout((entry) => {
              if (entry && entry.parentNode) {
                entry.remove();
              }
            }, 500, entries[i]);
          }
        }
        
        // Add log entry for clearing
        setTimeout(() => {
          addActivityEntry(
            'Cleared old activity entries',
            'Removed activities older than 24 hours to keep log organized'
          );
        }, 1000);
        
        showNotification('🗑️ Old activities cleared', '#666');
      }
    }

    function showNotification(message, color = '#197CAE') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed; 
        top: 20px; 
        right: 20px; 
        background: ${color}; 
        color: white; 
        padding: 12px 20px; 
        border-radius: 20px; 
        z-index: 1000; 
        animation: slideUp 0.5s ease;
        font-weight: 500;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      `;
      notification.innerHTML = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-20px)';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    function updateStatus() {
      const statuses = ['New', 'In Progress', 'Quality Check', 'Completed', 'Delivered'];
      const currentStatus = 'In Progress';
      
      const newStatus = prompt(`📝 Update Case Status\n\nCurrent Status: ${currentStatus}\n\nAvailable statuses:\n${statuses.map((s, i) => `${i + 1}. ${s}`).join('\n')}\n\nEnter new status:`);
      
      if (newStatus && statuses.includes(newStatus)) {
        // Update the display
        const statusElements = document.querySelectorAll('.case-status');
        statusElements.forEach(el => {
          el.textContent = newStatus.toUpperCase();
          el.className = `case-status status-${newStatus.toLowerCase().replace(' ', '-')}`;
        });
        
        // Add to activity log
        addActivityEntry(
          `Changed status to "${newStatus}"`,
          `Case status updated from "${currentStatus}" to "${newStatus}"`
        );
        
        showNotification(`✅ Status updated to "${newStatus}"`, '#4caf50');
      }
    }

    function addNote() {
      const note = prompt('💬 Add Case Note\n\nEnter your note:');
      
      if (note && note.trim()) {
        addActivityEntry(
          'Added case note',
          `Note: "${note.length > 50 ? note.substring(0, 50) + '...' : note}"`
        );
        
        showNotification('✅ Note added successfully!', '#4caf50');
      }
    }

    function uploadPhotos() {
      const fileTypes = ['Progress photo', 'X-ray image', 'Impression scan', 'Reference document'];
      const selectedType = prompt(`📷 Upload Files\n\nSelect file type:\n${fileTypes.map((t, i) => `${i + 1}. ${t}`).join('\n')}\n\nEnter number:`);
      
      if (selectedType && selectedType >= 1 && selectedType <= 4) {
        const fileName = `${fileTypes[selectedType - 1].toLowerCase().replace(' ', '_')}_${Date.now()}.jpg`;
        
        addActivityEntry(
          'Uploaded file',
          `Added file: "${fileName}" (${fileTypes[selectedType - 1]})`
        );
        
        showNotification(`✅ File "${fileName}" uploaded successfully!`, '#4caf50');
      }
    }

    function markComplete() {
      if (confirm('✅ Mark this case as complete?\n\nThis will:\n• Update the status to "Completed"\n• Set completion date\n• Notify the doctor\n• Generate completion report\n\nContinue?')) {
        // Update status display
        const statusElements = document.querySelectorAll('.case-status');
        statusElements.forEach(el => {
          el.textContent = 'COMPLETED';
          el.className = 'case-status status-completed';
        });
        
        addActivityEntry(
          'Marked case as completed',
          'Case completed and ready for delivery. Doctor notification sent automatically.'
        );
        
        showNotification('🎉 Case marked as complete!', '#4caf50');
      }
    }

    function sendMessage() {
      const message = prompt('✉️ Send Message to Dr. Johnson\n\nEnter your message:');
      
      if (message && message.trim()) {
        addActivityEntry(
          'Sent message to doctor',
          `Message: "${message}"`
        );
        
        showNotification(`✅ Message sent to Dr. Johnson`, '#4caf50');
      }
    }

    function printCase() {
      addActivityEntry(
        'Generated case report',
        'Printed comprehensive case details and documentation'
      );
      
      showNotification('🖨️ Generating case report...', '#197CAE');
    }

    function editCase() {
      const sections = ['Patient Info', 'Specifications', 'Timeline', 'Notes', 'Files'];
      const section = prompt(`📝 Edit Case\n\nWhich section would you like to edit?\n${sections.map((s, i) => `${i + 1}. ${s}`).join('\n')}\n\nEnter number:`);
      
      if (section && section >= 1 && section <= 5) {
        addActivityEntry(
          `Edited ${sections[section - 1]}`,
          `Modified case ${sections[section - 1].toLowerCase()} section`
        );
        
        showNotification(`📝 Opening ${sections[section - 1]} editor...`, '#197CAE');
      }
    }

    function goBack() {
      showNotification('← Returning to cases list...', '#197CAE');
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      const cards = document.querySelectorAll('.main-info, .panel-card, .technical-specs, .notes-section');
      cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.style.animation = 'slideUp 0.6s ease-out forwards';
      });

      // Add real-time clock for "time ago" updates
      setInterval(() => {
        const timeElements = document.querySelectorAll('.activity-time');
        timeElements.forEach((element, index) => {
          if (element.textContent === 'Just now') {
            element.textContent = '1 min ago';
          } else if (element.textContent.includes('min ago')) {
            const minutes = parseInt(element.textContent) + 1;
            if (minutes < 60) {
              element.textContent = `${minutes} min ago`;
            } else {
              element.textContent = '1 hour ago';
            }
          }
        });
      }, 60000); // Update every minute
    });
  </script>
</body>
</html>